!function(){var e,t={576:function(e,t,r){"use strict";var n=window.wp.blocks,o=()=>React.createElement("svg",{fill:"none",height:20,viewBox:"0 0 25 26",width:20},React.createElement("path",{clipRule:"evenodd",d:"M0.260646 10.387C1.59838 3.14112 7.33154 -1.08564 14.3547 0.24277C21.0911 1.49872 25.0804 7.51279 23.7427 14.7828C22.4288 22.0045 16.5046 26.0622 9.57702 24.758C2.84056 23.4778 -1.07709 17.6329 0.260646 10.387ZM3.19889 9.80731C3.19889 5.87039 5.8027 2.27161 9.2187 1.03982C9.2187 1.03982 10.2937 0.605063 11.6075 0.74998C13.7097 0.967356 15.7163 2.175 17.054 3.69663C18.3918 5.21827 19.9206 8.45475 20.2311 11.5222C20.3745 12.8023 20.1356 15.7731 19.8012 17.1256C18.559 22.1011 16.0268 24.5889 12.9691 24.2024C10.9864 23.9609 9.88757 23.0431 9.12315 20.5312C8.52594 18.5507 7.97652 17.7053 6.37601 16.2561C4.05886 14.1307 3.19889 12.3675 3.19889 9.80731Z",fillRule:"evenodd"})),a=window.wp.blockEditor,i=window.wp.components,c=window.wp.element,l=window.wp.richText,s=r(697),u=r.n(s);const d=({iframeURL:e,integrationMessageType:t,onClose:r,onIntegrationSelect:n,title:o})=>((0,c.useEffect)((()=>{const e=e=>{const r=JSON.parse(e.data);r?.type===t&&n(r)};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[t,n]),React.createElement(i.Modal,{className:"integration-modal",onRequestClose:r,shouldCloseOnClickOutside:!1,title:o,isFullScreen:!0},React.createElement("iframe",{height:"100%",src:e,title:o,width:"100%"})));d.propTypes={iframeURL:u().string.isRequired,integrationMessageType:u().string.isRequired,onClose:u().func.isRequired,onIntegrationSelect:u().func.isRequired,title:u().string.isRequired};var p=d;const f=({onClose:e,onProductSelect:t,productSearchPageUrl:r})=>React.createElement(p,{iframeURL:r,integrationMessageType:"organic/affiliate-select-product",onClose:e,onIntegrationSelect:t,title:"Product Search"}),C=()=>null;f.propTypes={onClose:u().func,onProductSelect:u().func,productSearchPageUrl:u().string.isRequired},f.defaultProps={onClose:C,onProductSelect:C};var g=f;function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(this,arguments)}const m="organic/affiliate-product-link",v=({isActive:e,onChange:t,value:r,productSearchPageUrl:n})=>{const[s,u]=(0,c.useState)(!1),d=(0,c.useCallback)((()=>u(!1)),[u]),p=(0,c.useCallback)((()=>{t((0,l.removeFormat)(r,m))}),[t,r]),f=(0,c.useCallback)((()=>u(!0)),[u]),C=(0,c.useCallback)((({product:e,offerUrl:n})=>{const{start:o,end:a}=r,i={type:m,attributes:{url:n}};let c;if(o===a){const t=(0,l.create)({text:e.name});c=(0,l.insert)(r,(0,l.applyFormat)(t,i,0,e.name.length),o,a)}else c=(0,l.toggleFormat)(r,i);t(c),d()}),[r,t,d]);return React.createElement(React.Fragment,null,React.createElement(a.BlockControls,{group:"other"},React.createElement(i.ToolbarDropdownMenu,{controls:[{title:e?"Remove Affiliate Link":"Insert Affiliate Link",icon:"admin-links",onClick:e?p:f}],icon:o,label:"Organic Tools"})),s&&React.createElement(g,{onClose:d,onProductSelect:C,productSearchPageUrl:n}))};v.propTypes={onChange:u().func.isRequired,value:u().shape({start:u().number,end:u().number}).isRequired,isActive:u().bool.isRequired,productSearchPageUrl:u().string.isRequired};var h=window.wp.data;const b=()=>{setTimeout((()=>{window.organic||={},window.organic.cmd||=[],window.organic.cmd.push((({affiliate:e})=>e?.processPage()))}),0)},y=()=>{b()},w=({onEdit:e})=>React.createElement(i.Toolbar,null,React.createElement(React.Fragment,null,React.createElement(i.IconButton,{icon:"edit",label:"Edit product carousel",onClick:e}),React.createElement(i.IconButton,{icon:"update",label:"Refresh display",onClick:y})));w.propTypes={onEdit:u().func.isRequired};var E=w;const S=(0,c.forwardRef)((({productCardSnippet:e},t)=>React.createElement("div",{dangerouslySetInnerHTML:{__html:e},ref:t})));S.propTypes={productCardSnippet:u().string.isRequired};var P=S;const k=({onClose:e,onProductCardSelect:t,productCardCreationURL:r})=>React.createElement(p,{iframeURL:r,integrationMessageType:"organic/affiliate-select-product-card",onClose:e,onIntegrationSelect:t,title:"Product Card Creation"});k.propTypes={onClose:u().func.isRequired,onProductCardSelect:u().func.isRequired,productCardCreationURL:u().string.isRequired};var O=k;const T=u().shape({productCardEditURL:u().string,productCardSnippet:u().bool.isRequired}),_=({attributes:e,setAttributes:t,productCardCreationURL:r})=>{const n=(0,c.createRef)(),[o,l]=(0,c.useState)(!e.productCardSnippet),s=(0,c.useCallback)((()=>l(!1)),[l]),u=(0,c.useCallback)((()=>l(!0)),[l]),d=(0,c.useCallback)((({productCardSnippet:e,productCardEditURL:r})=>{t({productCardSnippet:e,productCardEditURL:r}),s(),n.current&&n.current.removeAttribute("data-organic-affiliate-processed"),y()}),[s,n,t]);return React.createElement("div",(0,a.useBlockProps)(),o&&React.createElement(O,{onClose:s,onProductCardSelect:d,productCardCreationURL:e.productCardEditURL||r}),React.createElement(a.BlockControls,null,React.createElement(a.BlockControls,null,React.createElement(E,{onEdit:u}))),React.createElement(i.Card,null,React.createElement(i.CardHeader,null,"Product Card"),React.createElement(i.CardBody,null,e.productCardSnippet?React.createElement(P,{ref:n,productCardSnippet:e.productCardSnippet}):React.createElement("h3",null,"Product Card is unfinished."))))};_.propTypes={attributes:T.isRequired,setAttributes:u().func.isRequired,productCardCreationURL:u().string.isRequired};var U=_;const L=({attributes:e})=>(async function(){return new Promise((e=>{const t=(0,h.subscribe)((()=>{((0,h.select)("core/editor").isCleanNewPost()||(0,h.select)("core/block-editor").getBlockCount()>0)&&(t(),e())}))}))}().then((()=>{window.__wpOrganicAffiliateProcessed||(window.__wpOrganicAffiliateProcessed=!0,b())})),React.createElement("div",a.useBlockProps.save(),e?.productCardSnippet&&React.createElement(P,{productCardSnippet:e.productCardSnippet})));L.propTypes={attributes:T.isRequired};var q,B=L;function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I.apply(this,arguments)}q=organic_affiliate_config_product_card.productSearchPageUrl,(0,l.registerFormatType)(m,{title:"Affiliate Product Link",tagName:"a",attributes:{url:"href"},className:"organic-affiliate-link",edit:e=>React.createElement(v,R({},e,{productSearchPageUrl:q}))}),(0,n.registerBlockType)("organic/affiliate-product-card",{attributes:{productCardEditURL:{type:"string"},productCardSnippet:{type:"string"}},icon:o,edit:e=>React.createElement(U,I({},e,{productCardCreationURL:organic_affiliate_config_product_card.productCardCreationURL})),save:B})},703:function(e,t,r){"use strict";var n=r(414);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,a,i){if(i!==n){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return r.PropTypes=r,r}},697:function(e,t,r){e.exports=r(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=function(t,r,o,a){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],a=e[u][2];for(var c=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(c=!1,a<i&&(i=a));if(c){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,i=r[0],c=r[1],l=r[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(l)var u=l(n)}for(t&&t(r);s<i.length;s++)a=i[s],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},r=self.webpackChunkaffiliate_product_integrations=self.webpackChunkaffiliate_product_integrations||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var o=n.O(void 0,[431],(function(){return n(576)}));o=n.O(o)}();